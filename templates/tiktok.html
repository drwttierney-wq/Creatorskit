@app.route("/use_tool", methods=["POST"])
@login_required
def use_tool():
    data = request.get_json() or {}
    tool = data.get("tool")
    input_text = data.get("input", "").strip()

    if not input_text:
        return jsonify({"status": "error", "message": "No input provided"})

    try:
        # We'll build real AI logic here â€” for now, smart dummy + later real Grok/OpenAI
        if tool == "hashtag":
            # Simple smart generator (replace later with ai_engine.py call)
            base_tags = ["fyp", "viral", "trending", "foryou", "explore"]
            niche_tags = [word.lower() for word in input_text.split()[:4]]
            numbered = [f"{word}{i}" for word in niche_tags for i in range(1,4)]
            hashtags = base_tags + niche_tags + numbered + [input_text.replace(" ", "")]
            hashtags = list(dict.fromkeys(hashtags))[:30]  # unique + limit
            formatted = [f"#{tag}" for tag in hashtags]
            return jsonify({
                "status": "success",
                "result": {"hashtags": formatted}
            })

        # Add more tools here later (caption, script, etc.)

        return jsonify({"status": "success", "result": {"message": "Tool coming soon!"}})

    except Exception as e:
        return jsonify({"status": "error", "message": str(e)})

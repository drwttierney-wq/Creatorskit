{% extends 'base.html' %}
{% block content %}

<h1 class="page-title">ðŸŽµ TikTok Toolkit</h1>
<p class="subtitle">Viral videos & trends</p>

<div class="tools-grid">

    <div class="tool-card">
        <h3>ðŸ”– Hashtag Generator</h3>
        <p>Get 30 optimized hashtags for your video topic</p>
        
        <form id="hashtag-form">
            <input type="text" id="topic-input" placeholder="e.g. fitness motivation, cat videos" class="input-field" required>
            <button type="submit" class="generate-btn">Generate Hashtags</button>
        </form>

        <div id="output" class="output-box" style="display:none;"></div>
    </div>

    <!-- Add more tool-cards here later (Caption, Script, etc.) -->

</div>

<script>
    document.getElementById('hashtag-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const input = document.getElementById('topic-input').value;
        const output = document.getElementById('output');
        output.style.display = 'block';
        output.innerHTML = '<p style="color:#aaa;">Generating hashtags...</p>';

        try {
            const res = await fetch('/use_tool', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({tool: 'hashtag', input: input})
            });
            const data = await res.json();

            if (data.status === 'success') {
                const hashtags = data.result.hashtags.join(' ');
                output.innerHTML = `
                    <h4>Your Hashtags (30 optimized):</h4>
                    <p class="hashtags">${hashtags}</p>
                    <button onclick="navigator.clipboard.writeText('${hashtags}')">Copy All</button>
                `;
            } else {
                output.innerHTML = `<p style="color:red;">Error: ${data.message}</p>`;
            }
        } catch (err) {
            output.innerHTML = '<p style="color:red;">Network error â€” try again</p>';
        }
    });
</script>

<style>
    .tools-grid { display: grid; gap: 20px; margin-top: 30px; }
    .tool-card { background: rgba(50,20,80,0.3); padding: 25px; border-radius: 16px; }
    .input-field { width: 100%; padding: 14px; background: #111; border: 1px solid #444; color: white; border-radius: 8px; margin: 10px 0; }
    .generate-btn { background: linear-gradient(90deg, #a855f7, #ec4899); padding: 14px 28px; border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: bold; }
    .output-box { margin-top: 20px; padding: 20px; background: #000; border-radius: 12px; border: 1px solid #333; }
    .hashtags { font-size: 20px; line-height: 1.8; word-spacing: 12px; }
</style>

{% endblock %}

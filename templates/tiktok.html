{% extends 'base.html' %}
{% block content %}

<h1 class="page-title">ğŸµ TikTok Toolkit</h1>
<p class="subtitle">Everything you need for viral videos & trends</p>

<div class="tools-grid">

    <!-- 1. Idea Generator -->
    <div class="tool-card">
        <h3>ğŸ’¡ Idea Generator</h3>
        <p>10 fresh video ideas for your niche</p>
        <form class="tool-form" data-tool="idea">
            <input type="text" placeholder="Your niche (e.g. fitness, comedy, beauty)" required>
            <button type="submit" class="generate-btn">Generate Ideas</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 2. Script Writer -->
    <div class="tool-card">
        <h3>ğŸ“ Script Writer</h3>
        <p>Full hook + script for your idea</p>
        <form class="tool-form" data-tool="script">
            <input type="text" placeholder="Video idea or topic" required>
            <button type="submit" class="generate-btn">Write Script</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 3. Hashtag Generator (already working) -->
    <div class="tool-card">
        <h3>ğŸ”– Hashtag Generator</h3>
        <p>30 optimized hashtags</p>
        <form class="tool-form" data-tool="hashtag">
            <input type="text" placeholder="Video topic" required>
            <button type="submit" class="generate-btn">Generate Hashtags</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 4. Caption Creator -->
    <div class="tool-card">
        <h3>âœï¸ Caption Creator</h3>
        <p>Engaging captions with emojis & CTAs</p>
        <form class="tool-form" data-tool="caption">
            <input type="text" placeholder="Describe your video" required>
            <button type="submit" class="generate-btn">Create Caption</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 5. Trend Analyzer -->
    <div class="tool-card">
        <h3>ğŸ“Š Trend Analyzer</h3>
        <p>Current trending sounds & challenges</p>
        <form class="tool-form" data-tool="trend">
            <input type="text" placeholder="Your niche (optional)" >
            <button type="submit" class="generate-btn">Find Trends</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 6. Sound Finder -->
    <div class="tool-card">
        <h3>ğŸ”Š Sound Finder</h3>
        <p>Trending audio suggestions</p>
        <form class="tool-form" data-tool="sound">
            <input type="text" placeholder="Mood or style (e.g. upbeat, dramatic)" required>
            <button type="submit" class="generate-btn">Find Sounds</button>
        </form>
        <div class="output-box"></div>
    </div>

    <!-- 7. Thumbnail Idea -->
    <div class="tool-card">
        <h3>ğŸ–¼ï¸ Thumbnail Idea</h3>
        <p>High-click thumbnail concepts</p>
        <form class="tool-form" data-tool="thumbnail">
            <input type="text" placeholder="Video topic" required>
            <button type="submit" class="generate-btn">Generate Ideas</button>
        </form>
        <div class="output-box"></div>
    </div>

</div>

<script>
    document.querySelectorAll('.tool-form').forEach(form => {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const input = form.querySelector('input').value;
            const tool = form.dataset.tool;
            const output = form.nextElementSibling;
            output.innerHTML = '<p style="color:#aaa;">Generating...</p>';

            const res = await fetch('/use_tool', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({tool, input})
            });
            const data = await res.json();

            if (data.status === 'success') {
                output.innerHTML = `<pre style="white-space: pre-wrap;">${data.result.text || data.result.hashtags?.join(' ') || JSON.stringify(data.result, null, 2)}</pre>
                    <button onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button>`;
            } else {
                output.innerHTML = `<p style="color:red;">${data.message}</p>`;
            }
        });
    });
</script>

<style>
    /* Your existing dark purple styles + these */
    .tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; margin: 30px 0; }
    .tool-card { background: rgba(80,40,120,0.2); padding: 25px; border-radius: 18px; border: 1px solid #444; }
    .tool-form input { width: 100%; padding: 14px; margin: 12px 0; background: #111; border: 1px solid #555; color: white; border-radius: 8px; }
    .generate-btn { background: linear-gradient(90deg, #c084fc, #ec4899); width: 100%; padding: 14px; border: none; color: white; font-weight: bold; border-radius: 8px; cursor: pointer; }
    .output-box { min-height: 100px; margin-top: 15px; padding: 15px; background: #000; border-radius: 12px; border: 1px solid #333; }
</style>

{% endblock %}

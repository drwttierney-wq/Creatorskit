{% extends 'base.html' %}
{% block content %}

<h1 class="page-title">Chat with @{{ other_user.username }}</h1>

<div class="chat-container">
    {% for msg in messages %}
    <div class="message {{ 'sent' if msg.sender_id == session.user_id else 'received' }}">
        <p>{{ msg.content }}</p>
        <span class="time">{{ msg.timestamp.strftime('%I:%M %p') }}</span>
    </div>
    {% endfor %}
</div>

<form action="/send_message" method="POST" style="position: fixed; bottom: 0; left: 0; right: 0; padding: 15px; background: #111; display: flex; gap: 10px; justify-content: center; border-top: 1px solid #333;">
    <input type="hidden" name="receiver" value="{{ other_user.username }}">
    <input type="text" name="content" placeholder="Type a message..." style="flex: 1; padding:15px; background:#222; color:white; border:1px solid #555; border-radius:12px;">
    <button type="submit" style="padding:15px 20px; background: linear-gradient(90deg, #9d4edd, #c77dff); border:none; color:white; border-radius:12px;">Send</button>
</form>

<style>
    .chat-container { max-width: 700px; margin: 0 auto; padding-bottom: 80px; }
    .message { max-width: 70%; padding: 15px; border-radius: 18px; margin: 10px 0; position: relative; }
    .received { background: rgba(80,50,140,0.3); align-self: flex-start; border-bottom-left-radius: 5px; }
    .sent { background: linear-gradient(90deg, #9d4edd, #c77dff); align-self: flex-end; margin-left: auto; border-bottom-right-radius: 5px; }
    .time { font-size: 12px; color: #aaa; margin-top: 5px; }
</style>

{% endblock %}

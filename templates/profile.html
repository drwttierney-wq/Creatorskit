{% extends "base_app.html" %}
{% block title %}Profile{% endblock %}

{% block content %}
{% if session.user %}

<div class="profile-container">

    <!-- PROFILE HEADER -->
    <section class="profile-header">
        <div class="avatar-wrap">
            <div class="avatar-ring">
                <img src="{{ session.get('avatar_url', '/static/default-avatar.png') }}"
                     class="avatar"
                     id="avatarPreview">
            </div>
            <label class="upload-btn">
                Change photo
                <input type="file" hidden onchange="previewAvatar(event)">
            </label>
        </div>

        <div class="profile-info">
            <h1 class="username">
                @{{ session['user'] }}
                <span class="verified">âœ”</span>
            </h1>

            <p class="role">Creator Â· Builder Â· AI User</p>

            <p class="bio">
                Building content, scaling brands, and using AI to grow faster ðŸš€
            </p>

            <div class="profile-actions">
                <button class="primary-btn" onclick="openEdit()">Edit profile</button>
                <button class="secondary-btn">Share</button>
            </div>
        </div>
    </section>

    <!-- COMPLETENESS HINT -->
    <div class="profile-hint">
        âœ¨ Profiles with a bio & socials get more engagement
    </div>

    <!-- SOCIAL LINKS -->
    <section class="social-links">
        <a class="social yt">YouTube</a>
        <a class="social ig">Instagram</a>
        <a class="social x">X</a>
        <a class="social tt">TikTok</a>
        <a class="social tw">Twitch</a>
    </section>

    <!-- STATS -->
    <section class="stats-grid">
        <div class="stat-card">
            <span class="stat-number">128</span>
            <span class="stat-label">Posts</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">2.4K</span>
            <span class="stat-label">Followers</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">87</span>
            <span class="stat-label">Following</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">$340</span>
            <span class="stat-label">Earnings</span>
        </div>
    </section>

    <!-- CONTENT -->
    <section class="profile-grid">

        <div class="card">
            <h3>Latest activity</h3>
            <div class="post-preview">
                <div class="post-dot"></div>
                <p>Shared a new post about AI growth strategies</p>
            </div>
            <div class="post-preview">
                <div class="post-dot"></div>
                <p>Updated profile and creator tools</p>
            </div>
        </div>

        <div class="card">
            <h3>Creator tools</h3>
            <ul class="tool-list">
                <li>YouTube AI Toolkit</li>
                <li>Instagram Caption Generator</li>
                <li>Twitch Growth Tools</li>
            </ul>
        </div>

        <div class="card">
            <h3>Achievements</h3>
            <div class="badges">
                <span class="badge">ðŸš€ Early Creator</span>
                <span class="badge">ðŸ”¥ 1K+ Followers</span>
                <span class="badge">ðŸ¤– AI Power User</span>
            </div>
        </div>

    </section>

</div>

<!-- EDIT MODAL -->
<div class="modal" id="editModal">
    <div class="modal-content">
        <h3>Edit profile</h3>
        <input placeholder="Display name">
        <textarea placeholder="Bio"></textarea>
        <input placeholder="YouTube link">
        <input placeholder="Instagram link">
        <input placeholder="X link">
        <input placeholder="TikTok link">
        <input placeholder="Twitch link">
        <div class="modal-actions">
            <button class="primary-btn" onclick="closeEdit()">Save</button>
            <button class="secondary-btn" onclick="closeEdit()">Cancel</button>
        </div>
    </div>
</div>

<script>
function openEdit(){editModal.classList.add("show")}
function closeEdit(){editModal.classList.remove("show")}
function previewAvatar(e){
    avatarPreview.src = URL.createObjectURL(e.target.files[0])
}
</script>

<style>
.profile-container{
    max-width:1100px;
    margin:auto;
    padding:32px 20px;
    color:#fff
}

/* HEADER */
.profile-header{
    display:flex;
    gap:32px;
    align-items:center;
    flex-wrap:wrap
}
.avatar-wrap{text-align:center}
.avatar-ring{
    width:120px;height:120px;
    padding:4px;border-radius:50%;
    background:linear-gradient(135deg,#8b5cf6,#22d3ee);
    box-shadow:0 0 30px rgba(139,92,246,.5)
}
.avatar{width:100%;height:100%;border-radius:50%;object-fit:cover}
.upload-btn{font-size:12px;color:#22d3ee;cursor:pointer}

/* INFO */
.username{font-size:30px;font-weight:900}
.verified{background:#22d3ee;color:#000;font-size:12px;padding:2px 6px;border-radius:6px}
.role{color:#aaa}
.bio{max-width:520px;color:#ccc}

/* ACTIONS */
.profile-actions{margin-top:12px;display:flex;gap:12px}
.primary-btn{
    background:linear-gradient(90deg,#8b5cf6,#22d3ee);
    border:none;padding:10px 18px;border-radius:12px;
    color:#fff;font-weight:700
}
.secondary-btn{
    background:transparent;border:1px solid #333;
    padding:10px 18px;border-radius:12px;color:#ccc
}

/* HINT */
.profile-hint{
    margin:28px 0;
    padding:14px 18px;
    background:rgba(34,211,238,.1);
    border:1px solid rgba(34,211,238,.3);
    border-radius:14px;
    color:#9befff
}

/* SOCIAL */
.social-links{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:32px}
.social{
    padding:10px 16px;
    border-radius:14px;
    background:#151529;border:1px solid #2a2a44
}

/* STATS */
.stats-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:18px;margin-bottom:40px
}
.stat-card{
    background:rgba(20,20,40,.85);
    padding:24px;border-radius:20px;text-align:center
}
.stat-number{
    font-size:30px;font-weight:900;
    background:linear-gradient(90deg,#8b5cf6,#22d3ee);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent
}
.stat-label{color:#aaa}

/* CONTENT GRID */
.profile-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:24px
}
.card{
    background:rgba(15,15,30,.9);
    padding:24px;border-radius:22px
}
.card h3{margin-bottom:14px}

/* POSTS */
.post-preview{
    display:flex;gap:10px;align-items:center;
    margin-bottom:10px;color:#ccc
}
.post-dot{
    width:8px;height:8px;border-radius:50%;
    background:linear-gradient(135deg,#8b5cf6,#22d3ee)
}

/* BADGES */
.badges{display:flex;flex-wrap:wrap;gap:8px}
.badge{
    padding:8px 12px;border-radius:999px;
    background:#222;color:#eee;font-size:14px
}

/* MODAL */
.modal{position:fixed;inset:0;display:none;
    background:rgba(0,0,0,.7);
    align-items:center;justify-content:center}
.modal.show{display:flex}
.modal-content{
    width:420px;max-width:90%;
    background:#0f0f1e;padding:28px;border-radius:22px
}
.modal-content input,
.modal-content textarea{
    width:100%;margin:8px 0;padding:12px;
    background:#1a1a2e;border:1px solid #333;
    border-radius:10px;color:#fff
}
.modal-actions{display:flex;gap:12px;margin-top:12px}
</style>

{% endif %}
{% endblock %}
